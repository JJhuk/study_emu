# Gameboy CPU Commands Overview

[Gameboy (LR35902) op_codeS](https://www.pastraiser.com/cpu/gameboy/gameboy_op_codes.html)

# 들어가기 전

Z80에 대한 책은 점점 더 구하기 어려워지고 있기 때문에, 이 정보가 부디 게임보이의 어셈블러 언어 특징에 대하 이해에 도움이 되었으면 합니다. 

# CPU 레지스터

## 일반적으로

게임보이의 명령어들 & 레지스터들은 Intel 8080, Intel 8085, Zilog Z80 microprocessors와 비슷합니다. 이 CPU들은 8비트를 가진 8개의 A,B,C,D,E,F,H,L 레지스터들과 두개의 Stack Pointer, Program Coutner 레지스터들을 가지고 있습니다.  ( 자세한 건 이전 문서인 CPU & 레지스터를 참고하세요. ) 

## 프로그램 카운터

전원이 켜지면 게임 보이의 프로그램 카운터는 0x100으로 초기화 되고, 실행된 롬의 그 위치에서 명령을 찾습니다.

프로그램 카운터는 이 지점부터 롬 카트리지에서 프로그래머가 생성한 명령으로 간접적으로 조정됩니다. 

## 스택 포인터

스택 포인터를 이해하는 것은, 게임 보이에서 어셈블리 언어로 하는 프로그래밍을 이해하는데 큰 열쇠입니다. 그리고 다른 프로세서의 어셈블리 언어에 익숙해 질 때, 개념은 동일하므로 큰 도움이 됩니다.

게임 보이의 스택 포인터는 "stack"의 상단을 추적하는 데에 사용합니다. 스택은 변수 저장, 리턴 주소 저장, 서브 루틴 인수 전달등 . 개별 프로그래머가 생각할 수 있는 다양한 많은 용도로 사용됩니다.  CALL, PUSH와 RST 명령어는 모두 스택에서 정보를 넣습니다. POP, RET 그리고 RETI 명령어는 모두 스택에서 정보를 가져옵니다.( 인터럽트는 스택에 반환 주소를 넣고 완료시 제거합니다.)  

정보가 스택에 저장되면 스택은 RAM 메모리에서 아래쪽으로 커집니다. 결과적으로 스택 포인터는 스택에서 사용하도록 할당된 RAM 공간의 가장 높은 위치에서 항상 초기화되어야합니다. 예를 들어 프로그래머가 낮은 RAM 공간의 맨 위에 스택 포인터를 찾으려면 (0xC000 - 0xDFFF) LD SP, 0xE000 명령을 사용하여 스택 포인터를 0xE000으로 설정합니다. (스택 포인터는 스택에 무언가를 놓기 전에 자동으로 감소하므로 사용 가능한 RAM의 끝을 지나서 다른 위치인 메모리 주소를 가리키는 값을 할당하는 것이 완벽하게 허용됩니다.)

# 명령어 Set

게임보이 CPU는 Z80 마이크로 프로세서의 서브셋입니다. 

# 8 Bit Loads ( 8비트 로드 명령어 )

## LD nn, n

### 설명

값 n을 nn에 넣습니다.

### 인자

nn = B, C, D, E, H, L, BC, DE, HL, SP

n = 8비트 즉시 값. 즉시 값에 대해서는 아래 문서를 참고해주세요. 

### 즉시값 (imm)

PC를 1 증가 시킨 다음, 해당 바이트를 반환합니다. WORD면 2바이트 증가.

### 명령어들

| 명령어 | 파라미터 | Op code | Cycle |
| ------ | -------- | ------- | ----- |
| LD     | B, n     | 6       | 8     |
| LD     | C, n     | 0E      | 8     |
| LD     | D, n     | 16      | 8     |
| LD     | E, n     | 1E      | 8     |
| LD     | H, n     | 26      | 8     |
| LD     | L, n     | 2E      | 8     |

## LD r1, r2

### 설명

r1에 r2 값을 넣습니다. 

### 인자

r1, r2 = A,B,C,D,E,H,L,(HL)

### 명령어들

| 명령 | 매개변수 | 클럭 | op_codes |
| ---- | -------- | ---- | ------- |
| LD   | (HL),E   | 8    | 73      |
| LD   | L,D      | 4    | 6A      |
| LD   | L,C      | 4    | 69      |
| LD   | L,H      | 4    | 6C      |
| LD   | C,C      | 4    | 49      |
| LD   | A,(HL)   | 8    | 7E      |
| LD   | A,H      | 4    | 7C      |
| LD   | D,D      | 4    | 52      |
| LD   | C,H      | 4    | 4C      |
| LD   | C,D      | 4    | 4A      |
| LD   | (HL),n   | 12   | 36      |
| LD   | E,E      | 4    | 5B      |
| LD   | L,E      | 4    | 6B      |
| LD   | E,D      | 4    | 5A      |
| LD   | C,L      | 4    | 4D      |
| LD   | L,(HL)   | 8    | 6E      |
| LD   | H,D      | 4    | 62      |
| LD   | B,(HL)   | 8    | 46      |
| LD   | A,D      | 4    | 7A      |
| LD   | C,B      | 4    | 48      |
| LD   | B,B      | 4    | 40      |
| LD   | H,H      | 4    | 64      |
| LD   | B,L      | 4    | 45      |
| LD   | L,B      | 4    | 68      |
| LD   | D,L      | 4    | 55      |
| LD   | (HL),B   | 8    | 70      |
| LD   | C,E      | 4    | 4B      |
| LD   | D,E      | 4    | 53      |
| LD   | A,C      | 4    | 79      |
| LD   | L,L      | 4    | 6D      |
| LD   | C,(HL)   | 8    | 4E      |
| LD   | A,A      | 4    | 7F      |
| LD   | (HL),H   | 8    | 74      |
| LD   | B,D      | 4    | 42      |
| LD   | E,(HL)   | 8    | 5E      |
| LD   | E,L      | 4    | 5D      |
| LD   | H,B      | 4    | 60      |
| LD   | (HL),L   | 8    | 75      |
| LD   | E,B      | 4    | 58      |
| LD   | B,C      | 4    | 41      |
| LD   | (HL),C   | 8    | 71      |
| LD   | H,(HL)   | 8    | 66      |
| LD   | E,H      | 4    | 5C      |
| LD   | A,B      | 4    | 78      |
| LD   | B,H      | 4    | 44      |
| LD   | B,E      | 4    | 43      |
| LD   | H,C      | 4    | 61      |
| LD   | D,H      | 4    | 54      |
| LD   | A,L      | 4    | 7D      |
| LD   | H,L      | 4    | 65      |
| LD   | H,E      | 4    | 63      |
| LD   | D,B      | 4    | 50      |
| LD   | D,(HL)   | 8    | 56      |
| LD   | E,C      | 4    | 59      |
| LD   | (HL),D   | 8    | 72      |
| LD   | D,C      | 4    | 51      |
| LD   | A,E      | 4    | 7B      |

Load Register 순서 ⇒ B, C, D, E, H, L, (HL), A

0,1,2,3,4,5,6,7

여기서 (HL)은 HL의 값이 아닌, 메모리 주소상 (HL)에 있는 값을 불러오는 것이다. 

- 여기서부터 op_code는 따로 적지 않고, 그냥 위 사이트를 참고하자. 

## LD A,n 

### 설명

A안에 n을 넣습니다. 

### 매개변수들

n = A, B, C, D, E, H, L, (BC), (DE), (HL), (nn), #

nn = 두 바이트의 즉시 값. ( LS 바이트 먼저. ) 

## LD n,A

### 설명

A를 n에 넣음. 

### 매개변수들

n = A, B, C, D, E, H, L, (BC), (DE), (HL), (nn)

nn = t두 바이트의 즉시 값. ( LS 바이트 먼저. )

## LD A, (C)

### 설명

0xFF00 + register C의 값을 A에 넣습니다. 즉, LD A, (0xFF00+C) 과 같습니다. 

## LD (C), A

### 설명

0xFF00 + register C에 A의 값을 넣습니다. 

## LD A,(HLD)

### 설명

LDD A, (HL)와 같음.

## LD A,(HL-)

### 설명

LDD A, (HL)와 같음. 

## LDD A,(HL)

### 설명

주소 HL에 있는 값을 A에 넣습니다. HL을 감소 시킵니다. 

LD (HL), A;

DEC HL; 와 같습니다.

## LD A, (HLI)

### 설명

LDI A, (HL) 과 같습니다.

## LD A, (HL+)

### 설명

LDI A, (HL)과 같습니다. 

## LDI A,(HL)

### 설명

A에 주소 HL에 있는 값을 넣고 HL을 증가 시킵니다. LD A, (HL) - INC HL 과 같습니다.

## LDH (n), A

### 설명

주소 0xFF00+n에 A를 넣습니다. 

### 파라미터

n = 1 바이트 임시값.

## LDH A,(n)

### 설명

A에 주소 0xFF00 + n에 있는 값을 넣습니다. 

# 16비트 로드

## LD n, nn

### 설명

n에 값 nn을 넣습니다.

### 파라미터

n = BC, DE, HL, SP

nn = 16비트 임시값

## LD SP, HL

### 설명

SP에 HL을 넣습니다. 

## LD HL,SP+n

### 설명

LDHL SP,n과 같습니다. 

## LDHL SP, n

SP + n